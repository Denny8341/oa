<!DOCTYPE html>
<html lang="zh-cn">
<head>	
	<meta charset="utf-8">
	<title>OA管理系统</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Charisma, a fully featured, responsive, HTML5, Bootstrap admin template.">
	<meta name="author" content="Muhammad Usman">

	<!-- The styles -->
	<link href="/static/css/bootstrap.css" rel="stylesheet">
	<link href="/static/css/main.css" rel="stylesheet">		
	<!-- ************************验证样式************************-->
	<script src="/static/SpryAssets/SpryValidationTextField.js" type="text/javascript"></script>
	<link href="/static/SpryAssets/SpryValidationTextField.css" rel="stylesheet" type="text/css">
	<script type="text/javascript">
		function FileUpload_onselect()
	    {
	        var path;
	        path=document.forms[0].FileUpload.value;      //C:\Documents and Settings\hud\桌面\AddFile.jpg
	        if(path){
	        	alert("修改文档后，系统将为您保留最近的5个版本");
	        }
	    }
	</script>
</head>

<body>	
	<div class="content">
		<div class="well place">			
			<i class="icon-home"></i><a href="#">文档管理</a>/<a href="#">文档管理</a>
		</div>		
		<div class="row-fluid">
			<i class="icon-bookmark"></i><span class="titletip">文档信息</span>			
			<form method="POST" enctype="multipart/form-data" 
				action="/wdgl/edit_doc/{{doc.id}}">	
				<div style="border:1px solid #94c1dc;">				
					<table class="table-list">								
						<tr>
							<td class="table-label">信息名称<font class="red">*</font></td>
							<td colspan="3">
								<span id="name">	
									<input type="text" name="name" value="{{doc.name}}" onchange="spryMaxLength(this,32)"/>
									<span class="textfieldRequiredMsg">不能为空</span>
									<span class="errorInfo">字符数不得大于32</span>
								</span>
							</td>	
							<td class="table-label">附件</td>
							<td colspan="3">
								<span id="file">	
									<input type="file" name="attachment" onchange="return FileUpload_onselect()" />
									<span class="textfieldRequiredMsg">不能为空</span>
								</span>	
							</td>
						</tr>						
					</table>
				</div>
				<div id="userForm">	
					<i class="icon-bookmark"></i><span class="titletip">用户权限</span>
					<div style="border:1px solid #94c1dc;">
						<table class="table-list">
							<tr>
								<th style="width:260px">用户编号</th>												
								<th style="width:260px">用户名称</th>	
								<th style="width:260px">浏览权限&nbsp;<input type="checkBox" style="margin-top:-4px;" onclick="selectAll(this,1)"/></th>	
								<th>下载权限&nbsp;<input type="checkBox" style="margin-top:-4px;" onclick="selectAll(this,2)"/></th>											
							</tr>
						</table>					
					</div>
					<div style="border:1px solid #94c1dc;border-top:0;height:285px;overflow:auto;">
						<table class="table-list">
							<tbody class="center" id="userId">
								{%- for obj in user_doc_privilege %}										
									<tr>
										<td style="width:268px"><input type="hidden" name="user_id" value="{{obj.id}}">{{obj.id}}</td>										
										<td style="width:268px">{{obj.real_name}}</td>
										{%- if obj.privilege_operation %}
										<td style="width:268px">
											<script>
											var privilege_operation = {{obj.privilege_operation}}
											if(parseInt(parseInt(privilege_operation)&1) !=0){
												document.write("<input type='checkBox' name='privilege_{{obj.id}}' value='1' checked/>");
											}else{
												document.write("<input type='checkBox' name='privilege_{{obj.id}}' value='1'/>");
											}
											</script>
										</td>
										<td>
											<script>
											var privilege_operation = {{obj.privilege_operation}}
											if(parseInt(parseInt(privilege_operation)&2) !=0){
												document.write("<input type='checkBox' name='privilege_{{obj.id}}' value='2' checked/>");
											}else{
												document.write("<input type='checkBox' name='privilege_{{obj.id}}' value='2'/>");
											}
											</script>
										</td>
										{%- else %}
										<td style="width:268px"><input type="checkBox" name="privilege_{{obj.id}}" value="1"/></td>
										<td><input type="checkBox" name="privilege_{{obj.id}}" value="2"/></td>
										{%- endif %}
									</tr>
								{%- endfor %}
							</tbody>
						</table>
					</div>
				</div>	
				<div style="margin-top:-20px;">
					<span class="point">*为必填字段</span><br/>
					<input type="submit" value="提交" class="btn btn-info" style="margin:0px;"/>
				</div>
			</form>
			
		</div><!--/row-fluid -->
	</div><!--/content -->

	<script src="/static/js/jquery-1.7.2.min.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="/static/js/script.js"></script>
	<script src="/static/js/system.js"></script>
	<script type="text/javascript">
		var sprytextfield1 = new Spry.Widget.ValidationTextField("name", "none");
		var sprytextfield2 = new Spry.Widget.ValidationTextField("file", "none");
		function selectAll(obj,num){
			if($(obj).attr("checked")=="checked"){
				$("input[value="+num+"]").attr("checked","checked")
			}
			else{
				$("input[value="+num+"]").removeAttr("checked")
			}
		}
	</script>
</body>
</html>
